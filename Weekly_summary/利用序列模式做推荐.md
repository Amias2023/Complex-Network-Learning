 # 利用序列模式 做推荐
 
 ## 1 Motivation
 
 * 推荐系统推荐太多完全相似的东西 
    * 例如   淘宝： 不停的推荐 一件外套，上衣；   抖音等短视频app 推荐几乎类型完全相似的视频，
 * 设计一个新的推荐方式 --推荐一些 相关主题（可能感兴趣） 但是并非完全同一种类的 东西
    * 例如： 淘宝： 访问一些潮流的衣服 裤子---可以推荐一些具有潮流元素的 首饰，包包 等
    
    
 ## 2， Data
 
 * 1. 将商品 分割成 若干的品类（细分）----约 500--1000
 
 * 2. 建立一个对应表，将商品类别编码 例如 r1,r2,...r500
 
 * 3. 记录每个人的访问序列（r1,r2,r5,...）---(时间间隔and时间停留 🌟)
 
 
 
 ## 3， 核心方法---创新点
 
 
 * 1. 将所获的序列，处理后，应用文本挖掘里面的 LDA模型 + K-means聚类分析 提取若干主题 （数目自定） 例如 c1,c2,c3
 
 
 * 2. 将个人访问序列 映射为-->访问主题序列 （c1,c2...cn）
 
 * 3. 深度学习方法进行预测  有一定的访问主题序列后的--->  下一个可能的访问主题 🌟
 
 * 4. 在预测的访问主题内，按照概率 推荐主题内 的品类  --- 涉及  （人愿意探索新的，还是执着旧的）🌟
    * 在先前访问序列存在的相似的品类
   
    * 访问品类序列 不存在的 品类
    
 
 ## 4. 理论--微观原理机制
 
 * 愿意探索新的，还是执着旧的
 * 主题之间的流动
 
 
 ## 5. 小问题
 
1. 小问题：假如一个人的序列是(r1,r2,r3,r4,r5,r6,r7,r8),其中1-4 属于c1 主题，5-8 属于c2主题，即他访问是先访问一系列同主题的再跳到别的主题，而我假如获得到r1,r2, 可能直接就会给他推荐跳到下一个主题
 > 一定概率留在原主题，一定概率跳转 ？
 
 
2. 考虑访问的时间点（工作日，休息日，早上 深夜。。）---环境特征
用户随时随地移动，在工作场合、通勤、旅游等不同的场景，信息偏好有所偏移。 所，浏览的兴趣不同


3. 层级结构的考虑
> 最上面Root，下面第一层的分类是像科技、体育、财经、娱乐，体育这样的大类，再下面细分足球、篮球、乒乓球、网球、田径、游泳...，足球再细分国际足球、中国足球，中国足球又细分中甲、中超、国家队...，相比单独的分类器，利用层次化文本分类算法能更好地解决数据倾斜的问题

4. 用户本身特征--兴趣标签，职业、年龄、性别等，还有很多模型刻划出的隐式用户兴趣


5. 探索新事物 or 执着旧事物

*  根据已经存在的序列中 重复性事物的比例权重进行划分

> 每个人对重复的定义不一样。举个例子，有人觉得这篇讲皇马和巴萨的文章，昨天已经看过类似内容，今天还说这两个队那就是重复。但对于一个重度球迷而言，尤其是巴萨的球迷，恨不得所有报道都看一遍。解决这一问题需要根据判断相似文章的主题、行文、主体等内容，根据这些特征做线上策略。


6. 如何根据具体推荐场景的特点将各种辅助信息有效地融入推荐算法一直是推荐系统研究领域的热点和难点，如何从各种辅助信息中提取有效的特征也是推荐系统工程领域的核心问题。


7. 推荐的商品 热点的商品


8. 对于 新用户的 冷启动问题 --- Cold Start


9. 抽取的特征既要保证准确性又要具有一定的实际意义，否则很难保证推荐结果的相关性

10. 因此可以发现用户的潜在兴趣，并且针对每个用户生成其个性化的推荐结果
> 这种方法计算出来的推荐是开放的，可以共用他人的经验，很好的支持用户发现潜在的兴趣偏好。

11. 物品的个数是远远小于用户的数量的，而且物品的个数和相似度相对比较稳


12. 由于以历史数据为基础，抓取和建模用户的偏好后，很难修改或者根据用户的使用演变，从而导致这个方法不够灵活。

13. 数据规范性差、区分度差的情况下，如何归并重复商品种类，这本身也是个很大的难题。



14.  深度学习方法进行预测  有一定的访问主题序列后的--->  下一个可能的访问主题 🌟
> 映射后的序列数量不相同 差别很大---频繁序列挖掘？ or 深度学习

15. 新用户的“冷启动问题”可以通过流行性和 混合方法进行解决，而新项问题可以通过使用基于内容的过滤或 multi- armed bandits(即探索利用)进行解决

16. 长尾理论作为一种新的经济模式，被成功的应用于网络经济领域。而 对长尾资源的盘活和利用，恰恰是推荐系统所擅长的，因为用户对长尾内 容通常是陌生的，无法主动搜索，唯有通过推荐的方式，引起用户的注意， 发掘出用户的兴趣，帮助用户做出最终的选择。

17. 精准是个坑，不要跳，不要跳，不要跳。我从不敢说精准，怕被老板听见，因为那是一个望山跑死马的终极目标，在实际中，不如多关注量化指标的增长。


18.  同一个主题下的 排序和队列  分数高的作为推荐

19. 隐式反馈比显式反馈要爽
> 所谓隐式反馈，就是用户发出这些行为时并不是为了表达兴趣/态度，只是在正常使用产品而已，反之，显式反馈就是用户在做这个操作时就是要表达自己的态度，如评分，投赞成/反对票。
> 1. 数据比显式反馈更加稠密。诚然，评分数据总体来说是很稀疏的，之前netflix的百万美元挑战赛给出的数据稀疏度大概是1.2%，毕竟评分数据是要消耗更多注意力的数据。
> 2.隐式反馈更代表用户的真实想法，比如你不是很赞成川普的观点，但是还是想经常看到他的内容（以便吐槽他），这是显式反馈无法捕捉的。而人们在Quora上投出一些赞成票也许只是为了鼓励一下作者，或者表达一些作者的同情，甚至只是因为政治正确而投，实际上对内容很难说真正感兴趣。
> 3.隐式反馈常常和模型的目标函数关联更密切，也因此通常更容易在AB测试中和测试指标挂钩。这个好理解，比如CTR预估当然关注的是点击这个隐式反馈。

20. 推荐可解释比精准更有意义

21. 矩阵分解大法好
> 它可以用来降维，这部分通常是PCA这样的无监督学习算法承担的，矩阵分解得到的隐因子就是降维后的特征，可以直接作为其他学习算法的输入；它还可以做聚类，比如Non-negative Matrix Factorization就常常用来做聚类；SVD就是一种回归，标准的监督学习。矩阵分解还有一些变种：ALS（交替最小二乘），SVD++（结合特征的SVD），FM（因子机），TF（张量分解）。总之，在推荐系统里，使劲压榨矩阵分解的效果。


22. 好的特征有以下特点：
 * 可复用。可复用就是说不止一个模型可以用，换个模型一样用。
 * 可转换。特征是既可以直接使用，也可以进行一些尺度转换的，比如对数转换等。
 * 可解释。特征的物理意义需要很清楚。
 * 可靠。特征出现异常的话需要能及时监控到，也要容易调试。



23. 常见的推荐算法有很多分布式的库，比如Spark中就有MLib库，但是也可以试试一些著名的单机版，如GraphChi。
一些在单机上并行处理数据的方法不为人知，比如像C++中的openmp这样的库



24. 对于很多用户来说， 跟在意的是价格 而不是兴趣


25. 文本结构化： 准确性， 粒度 ， 覆盖面

26. 嵌入： Embedding： 挖掘字面意思之下的语义信息

27. LDA 模型需要设定主题个数，如果你有时间，那么这个 K 可通过实验进行对比挑选：每次计算K个主题俩俩之间的平均相似度，选择一个较低的K值？？
计算资源足够，主题数目可以多一些 
> 开源的LDA训练工具有 Gensim PLDA 



28. 构建用户画像方法
  * 查户口： 注册资料，购买历史，阅读历史 ---- 针对用户冷启动
  * 堆数据： 从历史行为数据挖掘标签，标签纬度上做数据统计
  * 黑盒子： 机器学习： 学习无法直观理解的稠密向量
     * 潜语义模型
     * 矩阵分解得到隐藏因子
     * 深度学习用户的Embedding 向量

29. 用户点击的时序数据，经过word2vec 学习算法之后得到物品的向量，进一步变成用户的向量



30. 对于非常活跃的用户，数据足够多，有必要为其个人构建一个模型
更多的用户 数据是稀疏的，需要全局数据泛化

31. 改进集中在 用户对物品的喜欢程度上
 > 1. 惩罚对热门物品的喜欢程度， 热门的东西很难反应用户端额真是兴趣，无聊随便点击，群体行为常见特点 2. 增加喜欢程度的时间衰减，使用一个指数函数，指数是一个负数


32. 损失函数加入正则化项 ，一个负责偏差，一个负责模型的方差，偏差大的模型欠拟合，方差大的模型过拟合

33. 行为预测模型： One - Class数据

> 预测用户行为看作是一个 二分类的问题， 猜测用户会不会去做某事，但是实际上收集的数据只有明确的一类： 用户做了某事，而用户不做某事的数据没有表达

隐式反馈的矩阵分解--- Weight- ALS 加权交替最小二乘


34.  物品的隐因子向量先做聚类分析，再逐一计算用户和每个聚类中心的推荐分数，给用户推荐物品聚类
得到推荐的聚类后，， 再从每个聚类中挑选少许的几个物品作为推荐结果


35. 对内容的挖掘 越深入越好，甚至优于 对排序模型的优化

36.  Product2vec---将用户按照时间先后顺序加入到购物车的商品，看成一个一个的词，所有的商品看成是一个文档


37. 人的mobility  出发和 离开 最终都有目的地，，，然而 购物，， 序列 不连贯  会终止跳出，下次打开 搜索新的物品  🌟


38. 划分出来的主题（语义结果） -- 和原本的划分一样


39. 含义解释 ： 人的访问序列--- 与区域的功能性有关，， 访问物品的序列 与物品的语义 无直觉上的关联 🌟 

40. 加入时间信息的意义

41. Researchers from the Web Search, E-commerce and Marketplace domains have realized that just like one can train word embeddings by treating a sequence of words in a sentence as context, the same can be done for training embeddings of user actions by treating sequence of user actions as context.” - Mihajlo Grbovic, Airbnb








